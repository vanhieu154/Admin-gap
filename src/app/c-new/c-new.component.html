<div class="container w-100" style="padding-top: 30px;">

  <div class=" title--themsp" >
  <mat-icon >add</mat-icon>
  Tạo coupon
  </div>
  <div  class="table-container" style=" padding-right: 40px; margin-top: 30px;">
  <table class="table table-hover "  >
  <thead>
  <tr >
  <th style="border-top-left-radius: 10px;  word-wrap: break-word;">Thuộc tính</th>
  <th style="border-top-right-radius: 10px; text-align: center;  padding-right: 20px;">Nội dung</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left; padding-left: 20px; font-weight: bold;">Tên coupon</td>
      <td style="border-top-right-radius: 10px; text-align: left; word-wrap: break-word; max-width: 280px; padding-left: 10px;">
        <input type="text" min="0" #subject="ngModel"   [(ngModel)]="coupon.TenCoupon" style=" width: 99%; " class="input_border">

    </tr>
    <tr>
      <td style="text-align: left; padding-left: 20px; font-weight: bold;">Hình ảnh</td>
      <td style=" text-align: left; word-wrap: break-word; max-width: 280px; ">

        <input style="padding-left: 10px;" type="file" class="file-input" name="Hinhanh" id="Hinhanh" multiple (change)="onFileSelected($event,coupon)" required minlength="1">
        <div style="flex-basis: 50%; padding: 5px;">
          <img  style="max-width: 150px; max-height: 200px;" src="{{coupon.Hinhanh}}" alt="">
        </div>
      </td>
    </tr>
        <tr  >
          <td style="text-align: left; padding-left: 20px; font-weight: bold;">  <label for="coupon-value">Giá trị giảm </label> </td>

      <td align="left" >
        <input style=" width: 85px; text-align: center;" class="input_border" type="number" disabled [ngModel]="coupon.Giatrigiam"/>

        <mat-icon class="icon" (mousedown)="onCouponValueIncreaseStart($event)" (mouseup)="onCouponValueEnd()" (mouseleave)="onCouponValueEnd()" (click)="onCouponValueIncreaseClick()">add_circle</mat-icon>
        <mat-icon class="icon" (mousedown)="onCouponValueDecreaseStart($event)" (mouseup)="onCouponValueEnd()" (mouseleave)="onCouponValueEnd()" (click)="onCouponValueDecreaseClick()">remove_circle</mat-icon>

    </td>
      </tr>




      <tr>
        <td style="text-align: left; padding-left: 20px; font-weight: bold;">Số lượng</td>
        <td style="border-top-right-radius: 10px; text-align: left; word-wrap: break-word; max-width: 280px; padding-left: 10px;">
          <input type="number" min="0" #subject="ngModel"   [(ngModel)]="coupon.Soluong" style=" width: 99%; " class="input_border">
        </td>
      </tr>

      <!-- <tr>
        <td style="text-align: left; padding-left: 20px; font-weight: bold;">Loại sản phẩm áp dụng</td>
        <td style="border-top-right-radius: 10px; text-align: left; word-wrap: break-word; max-width: 280px; padding-left: 10px;">
          <input type="text" class="input_border" style=" width: 99%; "   (click)="showTable()" [(ngModel)]="searchProduct" (ngModelChange)="filterProducts()">
         <table *ngIf="displayTable" style=" max-height: 200px; max-width: 100%; overflow-x: auto;display: block;">
          <tr style="background-color: #d2beb4;" >
            <td style=" padding-left: 2px; padding-right: 2px;" > <input type="checkbox"> </td>
            <td style="word-wrap: break-word; " >Mã</td>
            <td style="word-wrap: break-word; ">Loại</td>
            <td style="word-wrap: break-word; ">Hình ảnh </td>
            <td style="word-wrap: break-word;" >Tên sản phẩm</td>
            <td style="word-wrap: break-word; " >Giá</td>
          </tr>
          <tr *ngFor="let product of filteredProducts || products" >
            <td style="max-width: 30px; width: 250px; padding-left: 2px; padding-right: 2px;" > <input type="checkbox" (change)="onCheckboxChange($event, product)"> </td>
            <td style="word-wrap: break-word; max-width: 200px;" >{{product.MaSP}}</td>
            <td style="word-wrap: break-word; max-width: 200px;">{{product.LoaiSP}}</td>
            <td style="word-wrap: break-word; max-width: 100px;">

              <div style="display: flex; flex-wrap: wrap; word-wrap: break-word;">

                  <img  style=" max-height: 100%; max-width: 100%; text-align: center;" src='{{product.Hinhanh[0]}}' alt="" >

              </div>
            </td>
            <td style="word-wrap: break-word; max-width: 475px;" >{{product.TenSP}}</td>
            <td style="word-wrap: break-word; max-width: 250px;" >{{product.Price.toLocaleString('vi-VN')}}</td>
          </table>
        </td> -->
      <!-- </tr> -->
          <tr>
            <td style="text-align: left; padding-left: 20px; font-weight: bold;">Nội dung</td>
            <td style="border-top-right-radius: 10px; text-align: left; word-wrap: break-word; max-width: 280px;padding-left: 10px;">
              <ckeditor  #subject="ngModel" debounce="500"  [(ngModel)]="coupon.Noidung" [editor]="Editor"/>
            </td>
            </tr>

            <tr>
              <td style="text-align: left; padding-left: 20px;font-weight: bold;">Thời gian áp dụng</td>
              <td style="border-top-right-radius: 10px; text-align: left; word-wrap: break-word; max-width: 280px;padding-left: 10px;">
                <mat-form-field class="example-form-field " style="max-width: 300px;">
                  <mat-label> Chọn khoảng thời gian </mat-label>
                  <mat-date-range-input [formGroup]="range" [rangePicker]="picker" >
                    <input matStartDate formControlName="start" placeholder="Ngày đầu"  [(ngModel)]="coupon.Ngaybatdau" >
                    <input matEndDate formControlName="end" placeholder="Ngày cuối"   [(ngModel)]="coupon.Ngayketthuc" >
                  </mat-date-range-input>
                  <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                  <mat-date-range-picker #picker></mat-date-range-picker>
                </mat-form-field>
              </td>
              </tr>


              <tr>
                <td style="text-align: left; padding-left: 20px; font-weight: bold;">Đơn áp dụng</td>
                <td style="border-top-right-radius: 10px; text-align: left; word-wrap: break-word; max-width: 280px; padding-left: 10px;">
                  <input type="number" min="0" #subject="ngModel"   [(ngModel)]="coupon.Dieukiengiam" style=" width: 99%; " class="input_border">
                </td>
              </tr>
  </tbody>
  </table>
  </div>
  <div align="right">

  <button class="button--sp" style="margin-bottom: 10px; margin-right: 40px;" (click)="postCoupon()"> <span> <mat-icon>save</mat-icon> </span> <span style="padding-left: 30px;"> Lưu </span></button>
  <button class="button--sp" style="margin-bottom: 10px; margin-right: 40px;" (click)=" toMainCouponPage()"  > <span> <mat-icon>arrow_back</mat-icon> </span> <span style="padding-left: 30px;"> Về trang chủ Coupon</span></button>
</div>


  </div>
